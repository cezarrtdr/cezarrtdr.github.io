<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Técnico: Calidad de Aire Lima (2015-2025)</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- CONFIGURACIÓN BASE (TEMA OSCURO) --- */
        :root {
            --bg-body: #0d1117;       /* Fondo General (Negro suave) */
            --bg-card: #161b22;       /* Fondo de tarjetas */
            --bg-code: #1e1e1e;       /* Fondo VS Code (Gris oscuro exacto) */
            --bg-output: #050505;     /* Fondo de Resultados (Casi negro) */
            
            --text-main: #c9d1d9;     /* Texto principal */
            --text-muted: #8b949e;    /* Texto secundario */
            
            --accent: #58a6ff;        /* Azul brillante */
            --border: #30363d;        /* Bordes sutiles */
        }

        /* =========================================
       ESCALADO "ZOOM 80%" (PC Y MÓVIL)
       ========================================= */
    
    /* 1. Definimos la escala base más pequeña (La Magia) */
    html {
        font-size: 13px; /* Reduce todo el sitio proporcionalmente */
        scroll-behavior: smooth;
    }

    /* 2. Ajustamos el cuerpo */
    body {
        font-family: 'Rajdhani', sans-serif; /* Tu fuente original */
        font-size: 1.1rem; /* Equivale a unos 14px muy nítidos */
        line-height: 1.6;
        background-color: #000;
        color: white;
        overflow-x: hidden;
        margin: 0;
        padding: 0;
    }

    /* 3. Contenedores más elegantes (evita que se estiren demasiado) */
    .main-wrapper, 
    .paper-container, 
    .hero-content {
        max-width: 850px !important; 
        margin: 0 auto; 
    }

    /* 4. Ajuste Móvil */
    @media (max-width: 768px) {
        html { font-size: 14px; } /* Un poco más grande en celular para leer bien */
        .paper-container, .main-wrapper { max-width: 100% !important; padding: 0 20px; }
    }

        .paper-container { max-width: 900px; margin: 0 auto 100px auto; }

        /* --- TIPOGRAFÍA --- */
        h1, h2, h3 { font-family: 'Inter', sans-serif; color: #ffffff; font-weight: 700; }
        h1 { font-size: 2.5rem; margin-bottom: 20px; letter-spacing: -0.5px; }
        h2 { border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-top: 60px; margin-bottom: 25px; font-size: 1.8rem; }
        h3 { font-size: 1.2rem; margin-top: 40px; margin-bottom: 15px; color: #ffffff; }
        p { margin-bottom: 20px; color: var(--text-main); }
        strong { color: white; font-weight: 600; }
        a { color: var(--accent); text-decoration: none; }
        a:hover { text-decoration: underline; }
        
        ul { margin-bottom: 30px; padding-left: 20px; }
        li { margin-bottom: 10px; }

        /* --- HEADER --- */
        header { border-bottom: 1px solid var(--border); padding-bottom: 30px; margin-bottom: 50px; }
        .meta-data { font-family: 'Inter', sans-serif; color: var(--text-muted); font-size: 0.9rem; display: flex; gap: 20px; flex-wrap: wrap; }
        .meta-data span { display: flex; align-items: center; gap: 6px; }
        .meta-data i { color: var(--accent); }

        /* --- ESTILO DE CÓDIGO (VS CODE DARK EXACTO) --- */
        .code-window {
            background-color: var(--bg-code); 
            border: 1px solid #333;
            border-radius: 8px;
            margin-bottom: 0; /* Pegado al output */
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            font-family: 'JetBrains Mono', monospace;
        }

        .code-header {
            background-color: #252526; /* Cabecera VS Code */
            padding: 8px 15px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #111;
        }

        .dots { display: flex; gap: 8px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .red { background-color: #ff5f56; }
        .yellow { background-color: #ffbd2e; }
        .green { background-color: #27c93f; }
        
        .filename { font-family: 'Inter', sans-serif; font-size: 0.8rem; color: #999; margin-left: 15px;}

        .copy-btn {
            background: transparent; border: 1px solid #444; color: #ccc;
            border-radius: 4px; padding: 4px 10px; font-size: 0.75rem; cursor: pointer;
            display: flex; align-items: center; gap: 6px; transition: 0.2s;
        }
        .copy-btn:hover { background-color: #333; color: white; }

        pre { margin: 0; padding: 20px; overflow-x: auto; color: #d4d4d4; }
        code { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; line-height: 1.6; }

        /* --- SYNTAX HIGHLIGHTING (PALETA EXACTA DE TU IMAGEN) --- */
        .keyword { color: #c586c0; }    /* Violeta (import, as, from) */
        .function { color: #dcdcaa; }   /* Amarillo (print, read_csv) */
        .string { color: #b5cea8; }     /* Verde Claro (Strings) */
        .number { color: #ce9178; }     /* Naranja (Números) */
        .comment { color: #6a9955; }    /* Verde Oscuro (Comentarios) */
        .variable { color: #9cdcfe; }   /* Azul Claro (Variables) */
        .class-name { color: #4ec9b0; } /* Turquesa (Clases) */

        /* --- ESTILO OUTPUT (TEMA NEGRO JUPYTER) --- */
        .jupyter-output {
            background-color: var(--bg-output); /* FONDO NEGRO */
            color: #e0e0e0;
            padding: 15px;
            border: 1px solid var(--border);
            border-top: none; /* Unir con el código */
            border-left: 4px solid var(--border); 
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            margin-bottom: 40px;
            overflow-x: auto;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }
        
        .output-text { white-space: pre-wrap; line-height: 1.5; color: #ccc; }

        /* --- TABLAS (ESTILO DARK MODE) --- */
        table.dataframe {
            border-collapse: collapse;
            width: 100%;
            font-family: 'Inter', sans-serif; 
            font-size: 0.9rem;
            margin: 10px 0;
            background-color: var(--bg-output);
        }
        table.dataframe th {
            text-align: left;
            padding: 12px 15px;
            background-color: #161b22; /* Cabecera oscura */
            color: #ffffff;
            font-weight: 600;
            border-bottom: 2px solid var(--border);
        }
        table.dataframe td {
            padding: 10px 15px;
            border-bottom: 1px solid #21262d; /* Líneas sutiles */
            color: #c9d1d9;
        }
        table.dataframe tr:hover { background-color: #1f2428; }

        /* BADGES (Adaptados a fondo negro) */
        .badge {
            padding: 4px 10px; border-radius: 4px; font-weight: 700; font-size: 0.75rem; display: inline-block;
        }
        .b-fail { 
            background-color: rgba(248, 81, 73, 0.15); /* Rojo transparente */
            color: #ff7b72; 
            border: 1px solid rgba(248, 81, 73, 0.4); 
        } 
        .b-pass { 
            background-color: rgba(46, 160, 67, 0.15); /* Verde transparente */
            color: #3fb950; 
            border: 1px solid rgba(46, 160, 67, 0.4); 
        }

        /* --- IMÁGENES --- */
        figure { margin: 40px 0; background-color: var(--bg-card); padding: 5px; border-radius: 6px; border: 1px solid var(--border); text-align: center; }
        img { max-width: 100%; height: auto; border-radius: 4px; }
        figcaption {
            font-family: 'Inter', sans-serif; font-size: 0.85rem; color: var(--text-muted); margin-top: 10px; font-style: italic;
        }

        /* Enlace volver */
        .back-link { font-family: 'Inter', sans-serif; font-size: 0.9rem; color: var(--text-muted); display: inline-flex; align-items: center; gap: 8px; margin-bottom: 40px; }
        .back-link:hover { color: var(--accent); }

        /* --- SCROLLBAR PERSONALIZADO --- */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: #0d1117; }
        ::-webkit-scrollbar-thumb { background-color: #30363d; border-radius: 6px; border: 2px solid #0d1117; }
        ::-webkit-scrollbar-thumb:hover { background-color: #58a6ff; }
        
        /* Sección de Descargas */
        .resources-section { margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border); }
        .btn-download {
            display: inline-flex; align-items: center; gap: 10px;
            background-color: #21262d; color: var(--accent);
            padding: 10px 20px; text-decoration: none;
            font-family: 'Inter', sans-serif; font-weight: 600; font-size: 0.95rem;
            border-radius: 6px; border: 1px solid var(--border);
            transition: 0.2s; margin-right: 15px; margin-bottom: 10px;
        }
        .btn-download:hover { background-color: #30363d; border-color: #8b949e; }
        
        /* ESTILO MAPA HERO */
        .map-hero {
            width: 100%;
            height: 600px;
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); /* Sombra para resaltar */
            margin-top: 20px;
        }

        /* =========================================
           OPTIMIZACIÓN MAESTRA PARA CELULARES
           (Pega esto al final de tu <style>)
           ========================================= */
        @media (max-width: 768px) {
            
            /* 1. AJUSTES GENERALES DEL CUERPO */
            body {
                padding: 20px 15px; /* Menos relleno a los lados */
                font-size: 16px;    /* Letra base legible */
            }

            .paper-container {
                width: 100%;
                margin-bottom: 50px;
                padding: 0;
            }

            /* 2. TÍTULOS MÁS PEQUEÑOS (Para que no corten la pantalla) */
            h1 { font-size: 1.8rem; line-height: 1.3; margin-bottom: 15px; }
            h2 { font-size: 1.4rem; margin-top: 40px; }
            h3 { font-size: 1.1rem; }

            /* 3. CABECERA Y METADATA (Apilar verticalmente) */
            header { margin-bottom: 30px; padding-bottom: 20px; }
            
            .meta-data { 
                flex-direction: column; /* Pone los datos uno debajo del otro */
                gap: 8px; 
            }
            
            .back-link { margin-bottom: 20px; font-size: 0.85rem; }

            /* 4. BLOQUES DE CÓDIGO Y TABLAS (Evitar que rompan el ancho) */
            .code-window, .jupyter-output {
                font-size: 0.75rem; /* Letra de código más chica */
                max-width: 100vw;   /* Forzar ancho máximo de pantalla */
            }
            
            pre { padding: 15px; } /* Menos relleno en código */
            
            /* Tablas con scroll horizontal suave */
            .jupyter-output { overflow-x: auto; -webkit-overflow-scrolling: touch; }

            /* 5. IMÁGENES Y MAPAS */
            figure { margin: 30px 0; }
            .map-hero { height: 350px; } /* Mapa más bajito en celular */

            /* 6. TARJETA DE DESCARGA (Fix del icono gigante) */
            .download-card-pro { padding: 30px 15px; }
            .python-icon { font-size: 4rem; margin-bottom: 15px; }
            .filename-badge { font-size: 0.8rem; white-space: normal; word-break: break-all; }
            .hero-btn { width: 100%; padding: 12px 0; font-size: 0.9rem; }
            
            /* 7. BOTÓN DE COPIAR CÓDIGO (Ajuste fino) */
            .code-header { padding: 8px 10px; }
            .filename { font-size: 0.7rem; margin-left: 8px; }
            .copy-btn { padding: 3px 8px; font-size: 0.7rem; }
        }





    </style>
</head>
<body>

    <main class="paper-container">
        
        <a href="index.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Volver al Portafolio
        </a>

        <header>
            <h1>Análisis de Calidad de Aire en Lima (2015-2025)</h1>
            <div class="meta-data">
                <span><i class="fas fa-user-circle"></i> César Torres</span>
                <span><i class="fas fa-code"></i> Python (Pandas, Scikit-learn)</span>
                <span><i class="fas fa-map-marker-alt"></i> Lima, Perú</span>
            </div>
        </header>

        <h2>1. Introducción</h2>
        <p>
            La contaminación atmosférica es uno de los principales riesgos ambientales en Lima.
        </p>
        <p>
            Este proyecto analiza el comportamiento de las partículas <strong>PM2.5</strong> y <strong>PM10</strong> utilizando datos históricos del SENAMHI, obtenidos oficialmente desde la plataforma de <a href="https://www.datosabiertos.gob.pe/dataset/monitoreo-de-los-contaminantes-del-aire-en-lima-metropolitana-servicio-nacional-de" target="_blank">Datos Abiertos del Perú <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i></a>.
        </p>
        <p>
            El alcance del estudio incluye auditar el cumplimiento normativo (ECA) y desarrollar modelos predictivos mediante Machine Learning.
        </p>

        <div style="display: flex; flex-direction: column; gap: 0;">
            <div class="code-window" style="margin-bottom: 0; border-bottom: none; border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
                <div class="code-header">
                    <div class="header-left">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                        <span class="filename">1_carga_datos.py</span>
                    </div>
                    <button class="copy-btn"><i class="far fa-copy"></i> Copiar</button>
                </div>
                <pre><code><span class="keyword">import</span> pandas <span class="keyword">as</span> pd

<span class="comment"># Carga del dataset crudo (CSV)</span>
<span class="variable">df</span> = pd.<span class="function">read_csv</span>(<span class="string">"Monitoreo de los contaminantes del aire en Lima Metropolitana.csv"</span>)

<span class="comment"># Previsualización</span>
<span class="variable">df</span></code></pre>
            </div>

            <div class="jupyter-output" style="border-top: 1px solid #333; border-top-left-radius: 0; border-top-right-radius: 0; max-height: 400px; overflow-y: auto;">
                <table class="dataframe">
                    <thead>
                        <tr>
                            <th></th><th>ID</th><th>ESTACION</th><th>FECHA</th><th>HORA</th><th>...</th><th>PM10</th><th>PM2_5</th><th>NO2</th><th>DISTRITO</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><th>0</th><td>1</td><td>CAMPO_DE_MARTE</td><td>20150101</td><td>50000</td><td>...</td><td>37.920</td><td>NaN</td><td>NaN</td><td>JESUS_MARIA</td></tr>
                        <tr><th>1</th><td>2</td><td>CAMPO_DE_MARTE</td><td>20150101</td><td>60000</td><td>...</td><td>53.390</td><td>NaN</td><td>NaN</td><td>JESUS_MARIA</td></tr>
                        <tr><th>2</th><td>3</td><td>CAMPO_DE_MARTE</td><td>20150101</td><td>70000</td><td>...</td><td>16.490</td><td>NaN</td><td>NaN</td><td>JESUS_MARIA</td></tr>
                        <tr><td colspan="10" style="text-align: center; color: #666; padding: 10px 0;"><i class="fas fa-ellipsis-v"></i></td></tr>
                        <tr><th>577794</th><td>577795</td><td>VILLA_MARIA...</td><td>20240531</td><td>230000</td><td>...</td><td>7.015</td><td>6.977</td><td>29.1</td><td>VILLA_MAR...</td></tr>
                    </tbody>
                </table>
                <div style="font-size: 0.75rem; color: #8b949e; margin-top: 10px;">577794 rows × 15 columns</div>
            </div>
        </div>


        <h2>2. Ingeniería y Limpieza de Datos</h2>
        <p>El dataset original presentaba un 34% de datos faltantes. Se aplicó interpolación lineal para preservar la continuidad de las series temporales sin introducir sesgos artificiales.</p>

        <div class="code-window">
            <div class="code-header">
                <div class="header-left">
                    <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                    <span class="filename">1_limpieza_datos.py</span>
                </div>
                <button class="copy-btn"><i class="far fa-copy"></i> Copiar</button>
            </div>
            <pre><code><span class="keyword">import</span> pandas <span class="keyword">as</span> pd

<span class="comment"># 1. Carga y conversión temporal</span>
<span class="variable">df</span>[<span class="string">'FECHA_DT'</span>] = pd.<span class="function">to_datetime</span>(<span class="variable">df</span>[<span class="string">'FECHA'</span>], format=<span class="string">'%Y%m%d'</span>)

<span class="comment"># 2. Imputación (Interpolación Lineal)</span>
<span class="variable">df_clean</span> = <span class="variable">df</span>.<span class="function">interpolate</span>(method=<span class="string">'linear'</span>, limit_direction=<span class="string">'both'</span>)

<span class="function">print</span>(<span class="string">f"Registros recuperados: {len(df_clean)}"</span>)
<span class="function">print</span>(<span class="string">"Dataset limpio y listo."</span>)</code></pre>
        </div>

        <div class="jupyter-output">
            <div class="output-text">Registros recuperados: 577794
Dataset limpio y listo.</div>
        </div>

        <h2>3. Análisis Exploratorio de Datos (EDA)</h2>
        <h3>3.1 Estadística Descriptiva</h3>
        
        <div class="code-window" style="margin-bottom: 0; border-bottom: none; border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
            <div class="code-header">
                <div class="header-left">
                    <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                    <span class="filename">2_estadistica_descriptiva.py</span>
                </div>
                <button class="copy-btn"><i class="far fa-copy"></i> Copiar</button>
            </div>
            <pre><code><span class="variable">cols_interes</span> = [<span class="string">'PM10'</span>, <span class="string">'PM2_5'</span>, <span class="string">'NO2'</span>] 

<span class="comment"># Generar resumen estadístico y transponer (.T)</span>
<span class="variable">resumen</span> = <span class="variable">df_clean</span>[<span class="variable">cols_interes</span>].<span class="function">describe</span>().<span class="function">round</span>(<span class="number">2</span>).<span class="variable">T</span>
<span class="variable">resumen</span></code></pre>
        </div>

        <div class="jupyter-output" style="border-top: 1px solid #30363d; border-top-left-radius: 0; border-top-right-radius: 0;">
            <table class="dataframe">
                <thead><tr><th>Variable</th><th>Count</th><th>Mean</th><th>Std</th><th>Min</th><th>Max</th></tr></thead>
                <tbody>
                    <tr><th>PM10</th><td>577,794</td><td>62.46</td><td>46.70</td><td>2.31</td><td>974.0</td></tr>
                    <tr><th>PM2.5</th><td>577,794</td><td>24.91</td><td>16.13</td><td>1.73</td><td>720.7</td></tr>
                    <tr><th>NO2</th><td>577,794</td><td>21.18</td><td>15.64</td><td>0.00</td><td>231.2</td></tr>
                </tbody>
            </table>
        </div>

        <h3>3.2 Visualización de Resultados</h3>
        <p>¿Qué estación tiene, en promedio, la peor calidad de aire?</p>
        <figure>
            <img src="Graficos_calidad-aire/promedio_historico.png" alt="Ranking de Contaminación">
            <figcaption>Fig 1. Promedio histórico. Santa Anita supera significativamente a Lima Centro.</figcaption>
        </figure>

        <h3>3.3 Distribución y Valores Atípicos</h3>
         <figure>
            <img src="Graficos_calidad-aire/boxplot.png" alt="Distribución y valores atípicos">
            <figcaption>Fig 2. Nos indica si la contaminacion es constante o hay valores atípicos (outliers).</figcaption>
        </figure>
        
        <h3>3.4 Tendencia Temporal</h3>
        <figure>
            <img src="Graficos_calidad-aire/tendencias_series.png" alt="Tendencia Temporal">
            <figcaption>Fig 3. Evolución temporal de la calidad del aire (2015-2025).</figcaption>
        </figure>

        <h3>3.5 Correlación entre Contaminantes</h3>
        <figure>
            <img src="Graficos_calidad-aire/scaterplot.png" alt="Correlación de contaminantes">
            <figcaption>Fig 4. Existe relación positiva fuerte entre PM10 (partículas gruesas) y PM2.5 (finas).</figcaption>
        </figure>

        <h3>3.6 Matriz de Correlación</h3>
        <figure>
            <img src="Graficos_calidad-aire/heatmap.png" alt="Matríz de correlación">
            <figcaption>Fig 5. Análisis matemático de correlación (Valor cercano a 1 indica correlación fuerte).</figcaption>
        </figure>

        <h3>3.7 Análisis de ciclo diario</h3>
        <figure>
            <img src="Graficos_calidad-aire/boxplot_horas.png" alt="Ciclo Diario">
            <figcaption>Fig 6. Ciclo diario. Nótese el pico a las 7-8 AM por tráfico vehicular.</figcaption>
        </figure>

        <h2>4. Estadística Inferencial y Normativa</h2>
        <p>En esta sección, evaluamos si las concentraciones de PM2.5 registradas cumplen con los <strong>Estándares de Calidad Ambiental (ECA) para Aire</strong> vigentes en Perú (D.S. N° 003-2017-MINAM).</p>
        
        <div class="jupyter-output">
            <table class="dataframe">
                <thead><tr><th>Ranking</th><th>Estación</th><th>Promedio</th><th>Límite ECA</th><th>Estado</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>SANTA ANITA</td><td>35.52</td><td>25.0</td><td><span class="badge b-fail">NO CUMPLE</span></td></tr>
                    <tr><td>2</td><td>S.J. LURIGANCHO</td><td>31.26</td><td>25.0</td><td><span class="badge b-fail">NO CUMPLE</span></td></tr>
                    <tr><td>3</td><td>CARABAYLLO</td><td>30.14</td><td>25.0</td><td><span class="badge b-fail">NO CUMPLE</span></td></tr>
                    <tr><td>4</td><td>VILLA MARÍA</td><td>24.56</td><td>25.0</td><td><span class="badge b-pass">CUMPLE</span></td></tr>
                    <tr><td>5</td><td>SAN BORJA</td><td>17.58</td><td>25.0</td><td><span class="badge b-pass">CUMPLE</span></td></tr>
                </tbody>
            </table>
        </div>

        <div class="code-window">
            <div class="code-header">
                <div class="header-left">
                    <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                    <span class="filename">2_analisis_anova.py</span>
                </div>
                <button class="copy-btn"><i class="far fa-copy"></i> Copiar</button>
            </div>
            <pre><code><span class="keyword">from</span> scipy <span class="keyword">import</span> stats

<span class="comment"># ANOVA de un factor: Comparar medias entre distritos</span>
<span class="variable">f_stat</span>, <span class="variable">p_val</span> = stats.<span class="function">f_oneway</span>(*<span class="variable">datos_por_estacion</span>)

<span class="function">print</span>(<span class="string">f"Estadístico F: {f_stat:.2f}"</span>)
<span class="function">print</span>(<span class="string">f"P-Valor: {p_val:.2e}"</span>)</code></pre>
        </div>

        <div class="jupyter-output">
            <div class="output-text">Estadístico F: 142.58
P-Valor: 2.14e-85</div>
        </div>

        <h3>4.1 Interpretación de la Prueba ANOVA</h3>
        <p>Dado que el <strong>P-valor es menor al nivel de significancia (0.05)</strong>, existe evidencia estadística suficiente para <strong>RECHAZAR la Hipótesis Nula</strong>. La ubicación geográfica influye significativamente en la calidad del aire.</p>

        <h2>5. Modelamiento Predictivo con Machine Learning</h2>
        <p>Implementación de un algoritmo de <strong>Regresión Lineal Simple</strong> utilizando <code>scikit-learn</code> para predecir PM2.5 basándose en PM10.</p>

        <div class="code-window">
            <div class="code-header">
                <div class="header-left">
                    <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                    <span class="filename">3_machine_learning.py</span>
                </div>
                <button class="copy-btn"><i class="far fa-copy"></i> Copiar</button>
            </div>
            <pre><code><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> <span class="class-name">LinearRegression</span>
<span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="variable">modelo</span> = <span class="class-name">LinearRegression</span>()
<span class="variable">modelo</span>.<span class="function">fit</span>(<span class="variable">X_train</span>, <span class="variable">y_train</span>)

<span class="variable">y_pred</span> = <span class="variable">modelo</span>.<span class="function">predict</span>(<span class="variable">X_test</span>)
<span class="variable">rmse</span> = np.<span class="function">sqrt</span>(<span class="function">mean_squared_error</span>(<span class="variable">y_test</span>, <span class="variable">y_pred</span>))

<span class="function">print</span>(<span class="string">f"RMSE: {rmse:.2f} ug/m3"</span>)
<span class="function">print</span>(<span class="string">f"R2 Score: {modelo.score(X_test, y_test):.4f}"</span>)</code></pre>
        </div>

        <div class="jupyter-output">
            <div class="output-text">RMSE: 14.95 ug/m3
R2 Score: 0.1550</div>
        </div>

        <figure>
            <img src="Graficos_calidad-aire/regresion.png" alt="Regresión Lineal">
            <figcaption>Fig 7. Ajuste del modelo. La alta dispersión sugiere la necesidad de variables meteorológicas.</figcaption>
        </figure>

        <h3 style="margin-top: 40px; color: white;">Análisis de Resultados del Modelo</h3>
        
        <div style="background-color: #161b22; border-left: 5px solid #ff7b72; border-radius: 4px; padding: 20px; margin-bottom: 30px;">
            <h4 style="margin-top: 0; color: #ff7b72; margin-bottom: 10px;">Análisis del Error (RMSE = 14.95 µg/m³)</h4>
            <p style="color: #c9d1d9; margin-bottom: 0;">En el contexto normativo peruano (ECA anual = <strong>25 µg/m³</strong>), un error de casi 15 µg/m³ es estadísticamente crítico, representando un margen de incertidumbre del 60%.</p>
        </div>

        <div style="background-color: #161b22; border-left: 5px solid #d2a8ff; border-radius: 4px; padding: 20px; margin-bottom: 40px;">
            <h4 style="margin-top: 0; color: #d2a8ff; margin-bottom: 10px;">Conclusión Final</h4>
            <p style="color: #c9d1d9; margin-bottom: 0;">La baja correlación sugiere la existencia de <strong>variables de confusión</strong> no incluidas, como la humedad relativa y la inversión térmica, características críticas del clima de Lima.</p>
        </div>

        <h2>6. Geolocalización de Estaciones (Mapa Interactivo)</h2>
        <p style="color: #c9d1d9; margin-bottom: 20px;">
            Exploración geoespacial de las estaciones de monitoreo. Este mapa de calor permite visualizar la densidad de contaminación y la ubicación exacta de los sensores en Lima Metropolitana. Puedes interactuar (hacer zoom y clic) en el mapa.
        </p>

        <div class="map-hero">
            <iframe src="Graficos_calidad-aire/mapa_interactivo.html" 
                    style="width: 100%; height: 100%; border: none; display: block;">
            </iframe>
        </div>
        <p style="text-align: center; color: var(--text-muted); font-style: italic; font-size: 0.85rem; margin-top: 10px;">
            Fig 8. Mapa interactivo generado con Folium (Python).
        </p>

        <div class="resources-section">
            <h3>Recursos del Proyecto</h3>
            <p>Accede al código fuente completo y los datasets utilizados en este análisis.</p>
            <a href="https://github.com/cezarrtdr/Proyectp_Calidad_Aire_Lima" class="btn-download" target="_blank">
                <i class="fab fa-github"></i> Ver repositorio
            </a>
        </div>

    </main>

    <script>
        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', () => {
                const codeBlock = button.parentElement.nextElementSibling.innerText;
                navigator.clipboard.writeText(codeBlock).then(() => {
                    const originalHTML = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-check"></i> Copiado';
                    button.style.color = '#3fb950';
                    button.style.borderColor = '#3fb950';
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.style.color = '#ccc';
                        button.style.borderColor = '#444';
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>